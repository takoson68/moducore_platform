# ModuCore Platform

**ModuCore Platform** 是一套以 **前端架構治理** 為核心的工作平台導向系統實驗專案，  
專為「需要反覆產出同類型前端、且長期維護成本高」的中大型 SaaS / 企業前端團隊而設計。

平台以「模組」作為最小組裝單位，落實低耦合與可替換性，  
並透過 **專案運行規則與生命週期定義**，把模組、版型與設定統一納入平台控管，  
讓專案能在既定規範下被快速組裝、由系統層級規則判定（非人為約定）並可重置。

ModuCore 的目標不是做一個網站，而是提供一個  
**可承載多個專案實例（Project）** 的工作平台。  
任何時間點系統只會存在一個可判定的專案狀態，  
配合可預期的 boot 流程，降低重複開發成本、控制長期維護風險，並提高可擴展性。

---

## 🎯 平台定位

ModuCore 是工作平台；  
Project 是專案實例；  
Module 是功能構成單位；  
Container 是統一的依賴注入與能力存取入口，用來避免模組亂耦合。

---

## 🧠 世界模型

平台設計以 **專案運行規則與生命週期定義** 為核心，  
此模型決定平台運行時的邊界、**系統層級規則判定（非人為約定）** 與生命週期結構。

平台文件負責說明與實作對齊，  
實際規則判定以此模型的主鏈為準。

---

## 🌍 世界（World）與專案（Project）

- 每個 Project 對應一個專案實例
- 專案以 `tenant_id` 作為唯一識別
- 任一時間只允許存在單一專案實例
- 專案切換等同於現有專案狀態的重置或替換

**專案層級規則與模組可用性控管**負責定義：

- 本專案允許啟用的模組集合
- 專案層級設定（config）
- 進入專案後的可用行為邊界

這裡的「World」不是資料夾概念，  
而是平台啟動後形成的 **唯一有效且可運作的專案狀態**。

---

## 🔥 Container：世界能力的唯一入口

Container 是 **統一的依賴注入與能力存取入口，用來避免模組亂耦合**。  
模組不能直接互相依賴，必須透過 Container 取得能力，  
才能確保模組可替換、可拔插，降低跨模組變更風險。其職責包含：

- 能力的註冊與存取
- 隔離模組之間的直接依賴
- 提供專案中可被使用的能力實體

Container **不負責**：

- 專案流程判定
- 權限判斷
- 專案生命週期決策

專案運行規則與生命週期由平台與 lifecycle 規則主導，而非 Container 本身。

---

## 🧱 模組（Module）：專案的構成實體

模組是專案功能的實作單位，但其存在並非預設成立。

一個模組可以包含：

- UI（頁面 / 元件）
- Routes
- Store
- API 介面
- 權限語意（public / auth）
- Lifecycle（init / dispose）

### 模組存在判準

> **模組是否存在，以 `container.register` 為唯一判準。**

- 未被註冊的模組，視為不存在
- 模組可見性與權限判定必須在註冊前完成
- 不可見或不合法的模組不得進入 Container

---

## 🧱 Store：狀態的權威來源

Store 負責專案狀態管理，  
且是影響專案未來行為的唯一權威來源。

### 狀態邊界原則

- 任何會影響專案未來行為的資料，必須進入 Store
- 不影響未來行為的資料，不得作為系統判定依據

### Store 的實作原則

為確保狀態具備單一權威性與可預期行為，  
本平台的 Store 不是單純的資料容器，  
而是建立於「容器註冊機制」與「可控的狀態響應策略」之上。

所有會影響專案未來行為的狀態，  
必須透過容器註冊後由 Store 統一管理，  
並以明確的存取與變更介面對外暴露，  
避免狀態被隱性修改或在模組間流竄。

### Store 類型

#### 平台級 Store（Platform Stores）

- 專案層級狀態
- 由平台在 boot 階段建立與註冊
- 範例：
  - auth / token
  - platformConfig
  - lifecycle / session

#### 模組私有 Store（Module Stores）

- 僅服務模組內部狀態
- 隨模組註冊與移除進行建立或清理
- 不得被其他模組直接依賴

---

## 🚧 Routing：專案存取邊界

Routing Guard 作為使用者進入專案內容的最後防線，負責：

- 驗證使用者是否可進入當前專案狀態
- 阻擋未授權或不合法的存取行為

Routing 不作為：

- 模組存在判準
- 能力註冊依據
- 專案規則判定核心

Routing 僅負責存取控制，不參與專案規則定義。

---

## 🔁 前端與後端關係

- 前端：負責專案運行規則落實、平台規則執行與模組組合
- 後端：維持為薄後端，僅提供必要 API（登入、Session、基礎資料）

後端不參與專案規則判定，  
僅作為專案運作所需的最小事實來源。

---

## 🧩 世界語意分層

```txt
┌──────────────────────────────┐
│           Platform           │ 專案規則 / lifecycle / guard
├──────────────────────────────┤
│        World (Project)       │ tenant_id / config
├──────────────────────────────┤
│           Container          │ 統一的依賴注入與能力存取入口
├──────────────────────────────┤
│           Modules            │ UI / store / api
├──────────────────────────────┤
│        Backend (Thin)        │ auth / session / data
└──────────────────────────────┘
```

---
